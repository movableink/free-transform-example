<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="../reveal/css/reveal.css">
		<link rel="stylesheet" href="../reveal/css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="../reveal/lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="../reveal/lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

        <section>
          <h2>Find all edges on mousedown</h2>
          <pre><code data-trim contenteditable>
// Find all of the edges of all models and group them by selected/non-selected
// in preparation for highlight alignment
setGuideEdges: function() {
  var models = this.get('models');
  var selected = this.get('selectedModels');

  var subtract = function(a, b) {
    return a.reject(function(i) { return b.contains(i); });
  };

  var unselected = subtract(models, selected);

  // top and bottom edges of all selected elements
  this.selectedEdgesH = this.getEdges(selected,   'top',  'height');
  // top and bottom edges of unselected elements
  this.edgesH         = this.getEdges(unselected, 'top',  'height');
  this.selectedEdgesV = this.getEdges(selected,   'left', 'width');
  this.edgesV         = this.getEdges(unselected, 'left', 'width');

  // middle points for selected elements
  this.selectedMidpointsH = this.getMidpoints(selected,   'top',  'height');
  this.midpointsH         = this.getMidpoints(unselected, 'top',  'height');
  this.selectedMidpointsV = this.getMidpoints(selected,   'left', 'width');
  this.midpointsV         = this.getMidpoints(unselected, 'left', 'width');

  // sorting in advance makes it quicker to match edges
  this.selectedEdgesH.sort();
  this.selectedEdgesV.sort();

  this.checkForGuides(0,0);
},
          </code></pre>
        </section>

        <section>
          <h2>Check for guide matches on mousemove</h2>
          <pre><code data-trim contenteditable>
// Check to see if any of the selected models' edges align with any of
// the unselected models' edges, and create guides.
checkForGuides: function(topDelta, leftDelta) {
  var i, len, mid, edge;
  this.get('horizontalGuides').clear();
  this.get('verticalGuides').clear();

  for(i = 0, len = this.selectedMidpointsH.length; i < len; i++) {
    mid = this.selectedMidpointsH[i];
    if(this.get('midpointsH').indexOf(mid + topDelta) >= 0) {
      this.get('horizontalGuides').pushObject(mid + topDelta);
    }
  }

  for(i = 0, len = this.selectedMidpointsV.length; i < len; i++) {
    mid = this.selectedMidpointsV[i];
    if(this.get('midpointsV').indexOf(mid + leftDelta) >= 0) {
      this.get('verticalGuides').pushObject(mid + leftDelta);
    }
  }

  for(i = 0, len = this.selectedEdgesH.length; i < len; i++) {
    edge = this.selectedEdgesH[i];
    if(this.get('edgesH').indexOf(edge + topDelta) >= 0) {
      this.get('horizontalGuides').pushObject(edge + topDelta);
    }
  }

  for(i = 0, len = this.selectedEdgesV.length; i < len; i++) {
    edge = this.selectedEdgesV[i];
    if(this.get('edgesV').indexOf(edge + leftDelta) >= 0) {
      this.get('verticalGuides').pushObject(edge + leftDelta);
    }
  }
},
          </code></pre>
        </section>

        <section>
          <h2>Adding group movement to calculated top/left properties</h2>
          <pre><code data-trim contenteditable>
<div class="canvas">
  {{#each models as |model|}}
    <free-transform dragStart="dragStart" dragEnd="dragEnd" toggleSelected="toggleSelected" model={{model}} containerDeltaX={{deltaX}} containerDeltaY={{deltaY}} container={{this}}></free-transform>
  {{/each}}

  {{#each horizontalGuides as |guide|}}
    <div class="hguide" style="top: {{guide}}px;"></div>
  {{/each}}

  {{#each verticalGuides as |guide|}}
    <div class="vguide" style="left: {{guide}}px;"></div>
  {{/each}}

</div>
          </code></pre>
        </section>

				<section>
					<h2>github.com/movableink/free-transform-example</h2>
					<h3>(we're hiring!)</h3>
				</section>

			</div>

		</div>

		<script src="../reveal/lib/js/head.min.js"></script>
		<script src="../reveal/js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: '../reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../reveal/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../reveal/plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../reveal/plugin/zoom-js/zoom.js', async: true },
					{ src: '../reveal/plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
